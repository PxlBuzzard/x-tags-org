(function(){function t(t,e){var n=e.__layoutScroll__=e.__layoutScroll__||Object.defineProperty(e,"__layoutScroll__",{value:{last:e.scrollTop}}).__layoutScroll__,i=e.scrollTop,o=t.scrollBuffer;return n.max=n.max||Math.max(i+o,o),n.min=n.min||Math.max(i-o,o),n}function e(t){t.setAttribute("content-maximizing",null)}function n(t){t.removeAttribute("content-maximized"),t.removeAttribute("content-maximizing")}function i(i){var o=i.currentTarget;if("scroll"==o.hideTrigger&&!i.currentTarget.hasAttribute("content-maximizing")){var r=i.target;if(o.scrollTarget?xtag.matchSelector(r,o.scrollTarget):r.parentNode==o){var a=r.scrollTop,s=o.scrollBuffer,l=t(o,r);a>l.last?l.min=Math.max(a-s,s):l.last>a&&(l.max=Math.max(a+s,s)),o.maxcontent||(a>l.max&&!o.hasAttribute("content-maximized")?e(o):l.min>a&&n(o)),l.last=a}}}xtag.register("x-layout",{events:{scroll:i,transitionend:function(t){var e=t.target;!this.hasAttribute("content-maximizing")||e.parentNode!=this||"header"!=e.nodeName.toLowerCase()&&"footer"!=e.nodeName.toLowerCase()||(this.setAttribute("content-maximized",null),this.removeAttribute("content-maximizing"))},"tap:delegate(section)":function(t){var i=t.currentTarget;"tap"!=i.hideTrigger||i.maxcontent||this.parentNode!=i||(i.hasAttribute("content-maximizing")||i.hasAttribute("content-maximized")?n(i):e(i))},mouseout:function(t){"hover"!=this.hideTrigger||this.maxcontent||this.hasAttribute("content-maximized")||t.relatedTarget&&this.contains(t.relatedTarget)||e(this)},mouseover:function(t){"hover"!=this.hideTrigger||this.maxcontent||!this.hasAttribute("content-maximized")&&!this.hasAttribute("content-maximizing")||this!=t.relatedTarget&&this.contains(t.relatedTarget)||n(this)}},accessors:{scrollTarget:{attribute:{name:"scroll-target"}},scrollBuffer:{attribute:{name:"scroll-buffer"},get:function(){return Number(this.getAttribute("scroll-buffer"))||80}},hideTrigger:{attribute:{name:"hide-trigger"}},maxcontent:{attribute:{"boolean":!0},set:function(t){t?e(this):this.hasAttribute("content-maximizing")||n(this)}}}})})();