(function(){function t(t){return t.__transitions__=t.__transitions__||{}}function e(t,e,n){var o=getComputedStyle(t),s=n[e].after;t.setAttribute("transition",e),s&&!o[r].match(i)&&s()}var i=/[1-9]/,n=/ /g,o=/(\d|\d+?[.]?\d+?)(s|ms)(?!\w)/gi,s="transition"in getComputedStyle(document.documentElement)?"t":xtag.prefix.js+"T",r=s+"ransitionDuration",a=s+"ransitionProperty",l=function(t){xtag.requestFrame(function(){xtag.requestFrame(t)})},h="complete"==document.readyState?l(function(){h=!1}):xtag.addEvent(document,"readystatechange",function(){"complete"==document.readyState&&(l(function(){h=!1}),xtag.removeEvent(document,"readystatechange",h))});xtag.addEvents(document,{transitionend:function(e){var i=e.target,s=i.getAttribute("transition");if(s){var l=max=0,h=null,u=getComputedStyle(i),c=t(i),d=u[a].replace(n,"").split(",");if(u[r].replace(o,function(t,e,i){var e=parseFloat(e)*("s"===i?1e3:1);e>max&&(h=l,max=e),l++}),h=d[h],!h)throw new SyntaxError("No matching transition property found");e.propertyName==h&&c[s].after&&c[s].after()}}}),xtag.transition=function(i,n,o){var s=t(i),r=s[n]=o||{};r.immediate&&r.immediate(),r.before?(r.before(),h?xtag.skipTransition(i,function(){e(i,n,s)}):l(function(){e(i,n,s)})):e(i,n,s)},xtag.pseudos.transition={onCompiled:function(t,e){var i={},n=e.arguments[0]||"immediate",o=e.arguments[1]||e.key.split(":")[0];return function(){var e=this,s=arguments;return this.hasAttribute("transition")?(i[n]=function(){return t.apply(e,s)},xtag.transition(this,o,i),void 0):t.apply(this,s)}}}})();