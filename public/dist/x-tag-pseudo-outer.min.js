(function(){function t(t,n){var o=n.type,r=i[o]||(i[o]=[]),s=e[o]||(e[o]=[]),a=r.indexOf(t);return-1==a?(r.push(t),s.push(n)):(r.splice(a,1),s.splice(a,1)),r}var e={},i={},n={};xtag.pseudos.outer={action:function(t,e){return this==e.target||this.contains&&this.contains(e.target)?null:void 0},onRemove:function(e){t(this,e.source).length||xtag.removeEvent(document,n[e.source.type])},onAdd:function(o){t(this,o.source);var r=o.source.type;n[r]||(n[r]=xtag.addEvent(document,r,function(t){i[r].forEach(function(i,n){i==t.target||i.contains(t.target)||e[r][n].stack.call(i,t)})}))}}})();