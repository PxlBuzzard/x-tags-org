(function(){function t(t,n){var o=n.type,s=i[o]||(i[o]=[]),r=e[o]||(e[o]=[]),a=s.indexOf(t);return-1==a?(s.push(t),r.push(n)):(s.splice(a,1),r.splice(a,1)),s}var e={},i={},n={};xtag.pseudos.outer={action:function(t,e){return this==e.target||this.contains&&this.contains(e.target)?null:void 0},onRemove:function(e){t(this,e.source).length||xtag.removeEvent(document,n[e.source.type])},onAdd:function(o){t(this,o.source);var s=o.source.type;n[s]||(n[s]=xtag.addEvent(document,s,function(t){i[s].forEach(function(i,n){i==t.target||i.contains(t.target)||e[s][n].stack.call(i,t)})}))}}})();