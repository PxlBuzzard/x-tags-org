(function(){function t(t){var e=B.call(t);return U[e]||(U[e]=e.match(z)[1].toLowerCase())}function e(n,i){var o=e[i||t(n)];return o?o(n):n}function n(e){return-1==R.indexOf(t(e))?Array.prototype.slice.call(e,0):[e]}function i(t,e){return(e||H).length?n(t.querySelectorAll(e)):[]}function o(t,e){var n={added:[],removed:[]};e.forEach(function(e){e._mutation=!0;for(var i in n)for(var o=t._records["added"==i?"inserted":"removed"],r=e[i+"Nodes"],s=r.length,a=0;s>a&&-1==n[i].indexOf(r[a]);a++)n[i].push(r[a]),o.forEach(function(t){t(r[a],e)})})}function r(n,i,o){var r=t(o);return"object"==r&&"object"==t(n[i])?W.merge(n[i],o):n[i]=e(o,r),n}function s(t,e,n,i,o){var r=o[e];e in o?"function"==typeof o[e]&&(r.__mixins__||(r.__mixins__=[]),r.__mixins__.push(W.applyPseudos(n,i,t.pseudos))):o[e]=i}function a(t,e,n,i){if(i){var o={};for(var r in n)o[r.split(":")[0]]=r;for(r in e)s(t,o[r.split(":")[0]]||r,r,e[r],n)}else for(var a in e)n[a+":__mixin__("+Z++ +")"]=W.applyPseudos(a,e[a],t.pseudos)}function l(t){return t.mixins.forEach(function(e){var n=W.mixins[e];for(var i in n){var o=n[i],r=t[i];if(r)switch(i){case"accessors":case"prototype":for(var s in o)r[s]?a(t,o[s],r[s],!0):r[s]=o[s];break;default:a(t,o,r,"events"!=i)}else t[i]=o}}),t}function h(t,e){var n,i=e.target;if(!i.tagName)return null;if(W.matchSelector(i,t.value))n=i;else if(W.matchSelector(i,t.value+" *"))for(var o=i.parentNode;!n;)W.matchSelector(o,t.value)&&(n=o),o=o.parentNode;return n?t.listener=t.listener.bind(n):null}function u(t){if(t.type.match("touch"))t.target.__touched__=!0;else if(t.target.__touched__&&t.type.match("mouse"))return delete t.target.__touched__,void 0;return!0}function c(t){var e="over"==t;return{attach:"OverflowEvent"in E?"overflowchanged":[],condition:function(n){return n.flow=t,n.type==t+"flow"||0===n.orient&&n.horizontalOverflow==e||1==n.orient&&n.verticalOverflow==e||2==n.orient&&n.horizontalOverflow==e&&n.verticalOverflow==e}}}function d(t,e,n,i){i?e[t]=n[t]:Object.defineProperty(e,t,{writable:!0,enumerable:!0,value:n[t]})}function p(t,e){var n=Object.getOwnPropertyDescriptor(t,"target");for(var i in e)j[i]||d(i,t,e,n);t.baseEvent=e}function m(t,e){return{value:t.boolean?"":e,method:t.boolean&&!e?"removeAttribute":"setAttribute"}}function f(t,e,n,i){var o=m(e,i);t[o.method](n,o.value)}function _(t,e,n,i,o){for(var r=e.property?[t.xtag[e.property]]:e.selector?W.query(t,e.selector):[],s=r.length;s--;)r[s][o](n,i)}function g(t,e,n){t.__view__&&t.__view__.updateBindingValue(t,e,n)}function v(t,e,n,i,o,r){var s=n.split(":"),a=s[0];if("get"==a)s[0]=e,t.prototype[e].get=W.applyPseudos(s.join(":"),i[n],t.pseudos,i[n]);else if("set"==a){s[0]=e;var l=t.prototype[e].set=W.applyPseudos(s.join(":"),o?function(t){this.xtag._skipSet=!0,this.xtag._skipAttr||f(this,o,r,t),this.xtag._skipAttr&&o.skip&&delete this.xtag._skipAttr,i[n].call(this,o.boolean?!!t:t),g(this,r,t),delete this.xtag._skipSet}:i[n]?function(t){i[n].call(this,t),g(this,r,t)}:null,t.pseudos,i[n]);o&&(o.setter=l)}else t.prototype[e][n]=i[n]}function y(t,e){t.prototype[e]={};var n=t.accessors[e],i=n.attribute,o=i&&i.name?i.name.toLowerCase():e;i&&(i.key=e,t.attributes[o]=i);for(var r in n)v(t,e,r,n,i,o);if(i){if(!t.prototype[e].get){var s=(i.boolean?"has":"get")+"Attribute";t.prototype[e].get=function(){return this[s](o)}}t.prototype[e].set||(t.prototype[e].set=function(t){f(this,i,o,t),g(this,o,t)})}}function b(t){q[t]=(q[t]||[]).filter(function(e){return(e.tags=e.tags.filter(function(e){return e!=t&&!W.tags[e]})).length||e.fn()})}function L(t,e,n){t.__tap__||(t.__tap__={click:"mousedown"==n.type},t.__tap__.click?t.addEventListener("click",e.observer):(t.__tap__.scroll=e.observer.bind(t),window.addEventListener("scroll",t.__tap__.scroll,!0),t.addEventListener("touchmove",e.observer),t.addEventListener("touchcancel",e.observer),t.addEventListener("touchend",e.observer))),t.__tap__.click||(t.__tap__.x=n.touches[0].pageX,t.__tap__.y=n.touches[0].pageY)}function x(t,e){t.__tap__&&(t.__tap__.click?t.removeEventListener("click",e.observer):(window.removeEventListener("scroll",t.__tap__.scroll,!0),t.removeEventListener("touchmove",e.observer),t.removeEventListener("touchcancel",e.observer),t.removeEventListener("touchend",e.observer)),delete t.__tap__)}function w(t,e,n){var i=n.changedTouches[0],o=e.gesture.tolerance;return i.pageX<t.__tap__.x+o&&i.pageX>t.__tap__.x-o&&i.pageY<t.__tap__.y+o&&i.pageY>t.__tap__.y-o?!0:void 0}var E=window,P=document,T=P.createElement("div"),M=function(){},C=function(){return!0},D=/([\w-]+(?:\([^\)]+\))?)/g,S=/(\w*)(?:\(([^\)]*)\))?/,k=/(\d+)/g,A={action:function(t,e){return t.value.match(k).indexOf(e.keyCode+"")>-1==("keypass"==t.name)||null}},N=function(){var t=E.getComputedStyle(P.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return{dom:"ms"==e?"MS":e,lowercase:e,css:"-"+e+"-",js:"ms"==e?e:e[0].toUpperCase()+e.substr(1)}}(),O=Element.prototype.matchesSelector||Element.prototype[N.lowercase+"MatchesSelector"],I=E.MutationObserver||E[N.js+"MutationObserver"],U={},B=U.toString,z=/\s([a-zA-Z]+)/;e.object=function(t){var n={};for(var i in t)n[i]=e(t[i]);return n},e.array=function(t){for(var n=t.length,i=Array(n);n--;)i[n]=e(t[n]);return i};var R=["undefined","null","number","boolean","string","function"],H="",Z=0,j={};for(var F in P.createEvent("CustomEvent"))j[F]=1;var q={},W={tags:{},defaultOptions:{pseudos:[],mixins:[],events:{},methods:{},accessors:{},lifecycle:{},attributes:{},prototype:{xtag:{get:function(){return this.__xtag__?this.__xtag__:this.__xtag__={data:{}}}}}},register:function(t,e){var i;if("string"==typeof t){i=t.toLowerCase();var o=e.prototype;delete e.prototype;var r=W.tags[i]=l(W.merge({},W.defaultOptions,e));for(var s in r.events)r.events[s]=W.parseEvent(s,r.events[s]);for(s in r.lifecycle)r.lifecycle[s.split(":")[0]]=W.applyPseudos(s,r.lifecycle[s],r.pseudos,r.lifecycle[s]);for(s in r.methods)r.prototype[s.split(":")[0]]={value:W.applyPseudos(s,r.methods[s],r.pseudos,r.methods[s]),enumerable:!0};for(s in r.accessors)y(r,s);var a=r.lifecycle.created||r.lifecycle.ready;r.prototype.createdCallback={enumerable:!0,value:function(){var t=this;W.addEvents(this,r.events),r.mixins.forEach(function(e){W.mixins[e].events&&W.addEvents(t,W.mixins[e].events)});var e=a?a.apply(this,arguments):null;for(var n in r.attributes){var i=r.attributes[n],o=this.hasAttribute(n);(o||i.boolean)&&(this[i.key]=i.boolean?o:this.getAttribute(n))}return r.pseudos.forEach(function(e){e.onAdd.call(t,e)}),e}};var h=r.lifecycle.inserted,u=r.lifecycle.removed;(h||u)&&(r.prototype.attachedCallback={value:function(){return u&&(this.xtag.__parentNode__=this.parentNode),h?h.apply(this,arguments):void 0},enumerable:!0}),u&&(r.prototype.detachedCallback={value:function(){var t=n(arguments);t.unshift(this.xtag.__parentNode__);var e=u.apply(this,t);return delete this.xtag.__parentNode__,e},enumerable:!0}),r.lifecycle.attributeChanged&&(r.prototype.attributeChangedCallback={value:r.lifecycle.attributeChanged,enumerable:!0});var c=r.prototype.setAttribute||HTMLElement.prototype.setAttribute;r.prototype.setAttribute={writable:!0,enumberable:!0,value:function(t,e){var n=r.attributes[t.toLowerCase()];this.xtag._skipAttr||c.call(this,t,n&&n.boolean?"":e),n&&(n.setter&&!this.xtag._skipSet&&(this.xtag._skipAttr=!0,n.setter.call(this,n.boolean?!0:e)),e=n.skip?n.boolean?this.hasAttribute(t):this.getAttribute(t):e,_(this,n,t,n.boolean?"":e,"setAttribute")),delete this.xtag._skipAttr}};var d=r.prototype.removeAttribute||HTMLElement.prototype.removeAttribute;r.prototype.removeAttribute={writable:!0,enumberable:!0,value:function(t){var e=r.attributes[t.toLowerCase()];this.xtag._skipAttr||d.call(this,t),e&&(e.setter&&!this.xtag._skipSet&&(this.xtag._skipAttr=!0,e.setter.call(this,e.boolean?!1:void 0)),_(this,e,t,void 0,"removeAttribute")),delete this.xtag._skipAttr}};var p=o?o:e["extends"]?Object.create(P.createElement(e["extends"]).constructor).prototype:E.HTMLElement.prototype,m={prototype:Object.create(p,r.prototype)};e["extends"]&&(m["extends"]=e["extends"]);var f=P.registerElement(i,m);return b(i),f}},ready:function(t,e){var i={tags:n(t),fn:e};i.tags.reduce(function(t,e){return W.tags[e]?t:((q[e]=q[e]||[]).push(i),void 0)},!0)&&e()},mixins:{},prefix:N,captureEvents:["focus","blur","scroll","underflow","overflow","overflowchanged","DOMMouseScroll"],customEvents:{overflow:c("over"),underflow:c("under"),animationstart:{attach:[N.dom+"AnimationStart"]},animationend:{attach:[N.dom+"AnimationEnd"]},transitionend:{attach:[N.dom+"TransitionEnd"]},move:{attach:["mousemove","touchmove"],condition:u},enter:{attach:["mouseover","touchenter"],condition:u},leave:{attach:["mouseout","touchleave"],condition:u},scrollwheel:{attach:["DOMMouseScroll","mousewheel"],condition:function(t){return t.delta=t.wheelDelta?t.wheelDelta/40:Math.round(-1*(t.detail/3.5)),!0}},tapstart:{observe:{mousedown:P,touchstart:P},condition:u},tapend:{observe:{mouseup:P,touchend:P},condition:u},tapmove:{attach:["tapstart","dragend","touchcancel"],condition:function(t,e){switch(t.type){case"move":return!0;case"dragover":var n=e.lastDrag||{};return e.lastDrag=t,n.pageX!=t.pageX&&n.pageY!=t.pageY||null;case"tapstart":e.move||(e.current=this,e.move=W.addEvents(this,{move:e.listener,dragover:e.listener}),e.tapend=W.addEvent(P,"tapend",e.listener));break;case"tapend":case"dragend":case"touchcancel":t.touches.length||(e.move&&W.removeEvents(e.current,e.move||{}),e.tapend&&W.removeEvent(P,e.tapend||{}),delete e.lastDrag,delete e.current,delete e.tapend,delete e.move)}}}},pseudos:{__mixin__:{},mixins:{onCompiled:function(t,e){var n=e.source.__mixins__;if(n)switch(e.value){case"before":return function(){var e=this,i=arguments;return n.forEach(function(t){t.apply(e,i)}),t.apply(e,i)};case"after":case null:return function(){var e=this,i=arguments;return returns=t.apply(e,i),n.forEach(function(t){t.apply(e,i)}),returns}}}},keypass:A,keyfail:A,delegate:{action:h},within:{action:h,onAdd:function(t){var e=t.source.condition;e&&(t.source.condition=function(n,i){return W.query(this,t.value).filter(function(t){return t==n.target||t.contains?t.contains(n.target):null})[0]?e.call(this,n,i):null})}},preventable:{action:function(t,e){return!e.defaultPrevented}}},clone:e,typeOf:t,toArray:n,wrap:function(t,e){return function(){var n=arguments,i=t.apply(this,n);return e.apply(this,n),i}},merge:function(e,n,i){if("string"==t(n))return r(e,n,i);for(var o=1,s=arguments.length;s>o;o++){var a=arguments[o];for(var l in a)r(e,l,a[l])}return e},uid:function(){return Math.random().toString(36).substr(2,10)},query:i,skipTransition:function(t,e,n){var i=N.js+"TransitionProperty";t.style[i]=t.style.transitionProperty="none";var o=e?e.call(n):null;return W.requestFrame(function(){W.requestFrame(function(){t.style[i]=t.style.transitionProperty="",o&&W.requestFrame(o)})})},requestFrame:function(){var t=E.requestAnimationFrame||E[N.lowercase+"RequestAnimationFrame"]||function(t){return E.setTimeout(t,20)};return function(e){return t(e)}}(),cancelFrame:function(){var t=E.cancelAnimationFrame||E[N.lowercase+"CancelAnimationFrame"]||E.clearTimeout;return function(e){return t(e)}}(),matchSelector:function(t,e){return O.call(t,e)},set:function(t,e,n){t[e]=n,window.CustomElements&&CustomElements.upgradeAll(t)},innerHTML:function(t,e){W.set(t,"innerHTML",e)},hasClass:function(t,e){return t.className.split(" ").indexOf(e.trim())>-1},addClass:function(t,e){var n=t.className.trim().split(" ");return e.trim().split(" ").forEach(function(t){~n.indexOf(t)||n.push(t)}),t.className=n.join(" ").trim(),t},removeClass:function(t,e){var n=e.trim().split(" ");return t.className=t.className.trim().split(" ").filter(function(t){return t&&!~n.indexOf(t)}).join(" "),t},toggleClass:function(t,e){return W[W.hasClass(t,e)?"removeClass":"addClass"].call(null,t,e)},queryChildren:function(t,e){var i=t.id,o=t.id=i||"x_"+W.uid(),r="#"+o+" > ",s=!1;t.parentNode||(s=!0,T.appendChild(t)),e=r+(e+"").replace(",",","+r,"g");var a=t.parentNode.querySelectorAll(e);return i||t.removeAttribute("id"),s&&T.removeChild(t),n(a)},createFragment:function(t){var e=P.createDocumentFragment();if(t){for(var i=e.appendChild(P.createElement("div")),o=n(t.nodeName?arguments:!(i.innerHTML=t)||i.children),r=o.length,s=0;r>s;)e.insertBefore(o[s++],i);e.removeChild(i)}return e},manipulate:function(t,e){var n=t.nextSibling,i=t.parentNode,o=P.createDocumentFragment(),r=e.call(o.appendChild(t),o)||t;n?i.insertBefore(r,n):i.appendChild(r)},applyPseudos:function(t,e,i,o){var r=e,s={};if(t.match(":"))for(var a=t.match(D),l=a.length;--l;)a[l].replace(S,function(e,h,u){if(!W.pseudos[h])throw"pseudo not found: "+h+" "+a;u=""===u||u===void 0?null:u;var c=s[l]=Object.create(W.pseudos[h]);c.key=t,c.name=h,c.value=u,c.arguments=(u||"").split(","),c.action=c.action||C,c.source=o;var d=r;r=function(){var e=n(arguments),i={key:t,name:h,value:u,source:o,arguments:c.arguments,listener:d},r=c.action.apply(this,[i].concat(e));return null===r||r===!1?r:i.listener.apply(this,e)},i&&c.onAdd&&(i.nodeName?c.onAdd.call(i,c):i.push(c))});for(var h in s)s[h].onCompiled&&(r=s[h].onCompiled(r,s[h])||r);return r},removePseudos:function(t,e){e.forEach(function(e){e.onRemove&&e.onRemove.call(t,e)})},parseEvent:function(t,e){var i=t.split(":"),o=i.shift(),r=W.customEvents[o],s=W.merge({type:o,stack:M,condition:C,attach:[],_attach:[],pseudos:"",_pseudos:[],onAdd:M,onRemove:M},r||{});s.attach=n(s.base||s.attach),s.chain=o+(s.pseudos.length?":"+s.pseudos:"")+(i.length?":"+i.join(":"):"");var a=s.condition;s.condition=function(t){return t.touches,t.targetTouches,a.apply(this,arguments)};var l=W.applyPseudos(s.chain,e,s._pseudos,s);if(s.stack=function(t){t.currentTarget=t.currentTarget||this,t.touches,t.targetTouches;var e=t.detail||{};return e.__stack__?e.__stack__==l?(t.stopPropagation(),t.cancelBubble=!0,l.apply(this,arguments)):void 0:l.apply(this,arguments)},s.listener=function(t){var e=n(arguments),i=s.condition.apply(this,e.concat([s]));return i?t.type==o?s.stack.apply(this,e):(W.fireEvent(t.target,o,{baseEvent:t,detail:i!==!0&&(i.__stack__=l)?i:{__stack__:l}}),void 0):i},s.attach.forEach(function(t){s._attach.push(W.parseEvent(t,s.listener))}),r&&r.observe&&!r.__observing__){r.observer=function(t){var e=s.condition.apply(this,n(arguments).concat([r]));return e?(W.fireEvent(t.target,o,{baseEvent:t,detail:e!==!0?e:{}}),void 0):e};for(var h in r.observe)W.addEvent(r.observe[h]||document,h,r.observer,!0);r.__observing__=!0}return s},addEvent:function(t,e,n,i){var o="function"==typeof n?W.parseEvent(e,n):n;return o._pseudos.forEach(function(e){e.onAdd.call(t,e)}),o._attach.forEach(function(e){W.addEvent(t,e.type,e)}),o.onAdd.call(t,o,o.listener),t.addEventListener(o.type,o.stack,i||W.captureEvents.indexOf(o.type)>-1),o},addEvents:function(t,e){var n={};for(var i in e)n[i]=W.addEvent(t,i,e[i]);return n},removeEvent:function(t,e,n){n=n||e,n.onRemove.call(t,n,n.listener),W.removePseudos(t,n._pseudos),n._attach.forEach(function(e){W.removeEvent(t,e)}),t.removeEventListener(n.type,n.stack)},removeEvents:function(t,e){for(var n in e)W.removeEvent(t,e[n])},fireEvent:function(t,e,n,i){var o=P.createEvent("CustomEvent");n=n||{},i&&console.warn("fireEvent has been modified"),o.initCustomEvent(e,n.bubbles!==!1,n.cancelable!==!1,n.detail),n.baseEvent&&p(o,n.baseEvent);try{t.dispatchEvent(o)}catch(r){console.warn("This error may have been caused by a change in the fireEvent method",r)}},addObserver:function(t,e,n){t._records||(t._records={inserted:[],removed:[]},I?(t._observer=new I(function(e){o(t,e)}),t._observer.observe(t,{subtree:!0,childList:!0,attributes:!!0,characterData:!1})):["Inserted","Removed"].forEach(function(e){t.addEventListener("DOMNode"+e,function(n){n._mutation=!0,t._records[e.toLowerCase()].forEach(function(t){t(n.target,n)})},!1)})),-1==t._records[e].indexOf(n)&&t._records[e].push(n)},removeObserver:function(t,e,n){var i=t._records;i&&n?i[e].splice(i[e].indexOf(n),1):i[e]=[]}},G=!1,V=null;P.addEventListener("mousedown",function(t){G=!0,V=t.target},!0),P.addEventListener("mouseup",function(){G=!1,V=null},!0),P.addEventListener("dragend",function(){G=!1,V=null},!0);var J={touches:{configurable:!0,get:function(){return this.__touches__||(this.identifier=0)||(this.__touches__=G?[this]:[])}},targetTouches:{configurable:!0,get:function(){return this.__targetTouches__||(this.__targetTouches__=G&&this.currentTarget&&(this.currentTarget==V||this.currentTarget.contains&&this.currentTarget.contains(V))?(this.identifier=0)||[this]:[])}},changedTouches:{configurable:!0,get:function(){return this.__changedTouches__||(this.identifier=0)||(this.__changedTouches__=[this])}}};for(F in J)UIEvent.prototype[F]=J[F],Object.defineProperty(UIEvent.prototype,F,J[F]);W.customEvents.tap={observe:{mousedown:document,touchstart:document},gesture:{tolerance:8},condition:function(t,e){var n=t.target;switch(t.type){case"touchstart":return n.__tap__&&n.__tap__.click&&x(n,e),L(n,e,t),void 0;case"mousedown":return n.__tap__||L(n,e,t),void 0;case"scroll":case"touchcancel":return x(this,e),void 0;case"touchmove":case"touchend":return this.__tap__&&!w(this,e,t)?(x(this,e),void 0):"touchend"==t.type||null;case"click":return x(this,e),!0}}},E.xtag=W,"function"==typeof define&&define.amd&&define(W),P.addEventListener("WebComponentsReady",function(){W.fireEvent(P.body,"DOMComponentsLoaded")})})();