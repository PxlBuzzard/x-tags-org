(function(){var t=function(t){if("auto"==t.location)t.xtag.map.locate({setView:!0,maxZoom:t.zoom});else{var e=t.location.replace(" ","").split(",");t.xtag.map.setView(new L.LatLng(Number(e[0]),Number(e[1])),t.zoom)}},e=function(){this.xtag.tilelayer&&this.xtag.map.removeLayer(this.xtag.tilelayer),this.xtag.tilelayer=new L.TileLayer("http://{s}.tile.cloudmade.com/"+this.getAttribute("key")+"/"+(this.getAttribute("tile-set")||997)+"/256/{z}/{x}/{y}.png",this.getAttribute("tile-options")||{}),this.xtag.map.addLayer(this.xtag.tilelayer),t(this)};xtag.register("x-map",{lifecycle:{created:function(){var t=this;this.xtag.map=new L.Map(this),e.call(this),["load","viewreset","movestart","move","moveend","dragstart","zoomend","layeradd","layerremove","locationfound","drag","dragend","locationerror","popupopen","popupclose"].forEach(function(e){t.xtag.map.on(e,function(){xtag.fireEvent(t,e)})})}},accessors:{tileSet:{get:function(){return this.getAttribute("tile-set")||997},set:function(t){this.setAttribute("tile-set",t),e.call(this)}},zoom:{get:function(){var t=this.getAttribute("zoom");return Number(null===t?13:t)},set:function(t){this.setAttribute("zoom",t),this.xtag.map.setZoom(this.zoom)}},location:{get:function(){var t=this.getAttribute("location")||"37.3880, -122.0829";return t},set:function(e){this.setAttribute("location",e),t(this)}}}})})();